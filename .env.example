# MacroChef Environment Variables
# For Development: Copy this file to .env.local
# For Production: Copy this file to .env and update values

# === Database (PostgreSQL) ===
# Development: Use docker-compose default
# Production: Point to your PostgreSQL instance
DATABASE_URL=postgresql://admin:CHANGE_ME@postgresql-db:5432/mizan
DB_PASSWORD=CHANGE_ME

# === Backend API URLs ===
# Server-side: Internal Docker network URL (docker-compose) or localhost (local dev)
API_URL=http://backend:8080
# Client-side: Browser-accessible backend URL
NEXT_PUBLIC_API_URL=http://localhost:5000

# === BetterAuth Configuration ===
# IMPORTANT: BETTER_AUTH_URL must match your public domain
# Development: http://localhost:3000
# Production: https://yourdomain.com
BETTER_AUTH_URL=https://mizan.euaell.me

# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=change_me_in_production_use_openssl_rand

# JWT Configuration (must match between frontend and backend)
BETTER_AUTH_AUDIENCE=mizan-api
BETTER_AUTH_ISSUER=https://mizan.euaell.me

# Backend JWT/JWKS validation (used by .NET API)
BetterAuth__Issuer=https://mizan.euaell.me
BetterAuth__Audience=mizan-api
BetterAuth__JwksUrl=https://mizan.euaell.me/api/auth/jwks

# === Backend Configuration (.NET) ===
# Connection strings (PostgreSQL)
ConnectionStrings__PostgreSQL=Host=postgresql-db;Port=5432;Database=mizan;Username=admin;Password=CHANGE_ME;Pooling=true;Minimum Pool Size=0;Maximum Pool Size=1024;Timeout=15;CommandTimeout=30;Ssl Mode=Prefer;Trust Server Certificate=true;

# Connection strings (Redis)
ConnectionStrings__Redis=redis:6379,password=CHANGE_ME,abortConnect=false,connectTimeout=5000,syncTimeout=1000

# CORS Origins
Cors__Origins__1=https://mizan.euaell.me

# === OpenAI (Optional - for nutrition AI features) ===
OpenAI__ApiKey=sk-your-openai-api-key-here

# === Cloudinary (Image Uploads) ===
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=your_cloudinary_cloud_name
NEXT_PUBLIC_CLOUDINARY_API_KEY=your_cloudinary_api_key
CLOUDINARY_API_SECRET=your_cloudinary_api_secret

# === Email/SMTP (Password Reset & Verification) ===
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your_email@example.com
SMTP_PASS=your_email_app_password
SMTP_FROM=Mizan <noreply@mizan.example.com>

# === OAuth Providers (Optional) ===
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret

# === Environment Variable Types (Next.js) ===
#
# NEXT_PUBLIC_* variables (BUILD-TIME):
# - These are BAKED into the JavaScript bundle during build
# - Cannot be changed without rebuilding the Docker image
# - Set in Dockerfile.prod as ARG/ENV
# - Examples: NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME
#
# Server-side variables (RUNTIME):
# - These are evaluated at runtime when server code runs
# - Can be changed via .env file without rebuilding
# - Examples: DATABASE_URL, BETTER_AUTH_SECRET
#
# See: https://nextjs.org/docs/app/building-your-application/configuring/environment-variables

# === Production Security Notes ===
# 1. Generate strong random secrets:
#    openssl rand -base64 32
#
# 2. BETTER_AUTH_URL must match your public domain exactly
#    This is used for email verification links and JWT issuer
